---
import Doc from '$layouts/doc.astro';

import { landings, microcopy as micro } from '$lib/sanity';
import { buildSection } from '$lib/documentation';

import SectionNav from '$components/SectionNav.svelte';
import Text from '$components/Text.astro';

/**
 * Static paths
 *
 * @return {object} paths
 */
export function getStaticPaths() {
  return landings.map((landing) => {
    return {
      params: {
        lang: landing._langCode,
        landing: landing._slug,
      },
      props: {
        landing,
        microcopy: micro[landing._lang],
      },
    };
  });
}

const { landing, microcopy } = Astro.props;

const section = buildSection(landing.category);
---

<Doc
  title={landing.title}
  locale={microcopy.locale}
  metadesc={landing.description}
  section={landing._section}
>
  <SectionNav
    active={landing._path}
    title={landing.category.title}
    links={section}
    slot="subnav"
    client:visible
  />
  <Text body={landing.body} slot="content" />
</Doc>
